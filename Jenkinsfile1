pipeline {
    agent any

    parameters {
        choice(
            choices: ['Apache', 'Nginx'],
            name: 'WEBSERVER',
            description: 'Select the web server to deploy'
        )
    }

    stages {
        stage('Create directory for the WEB Application') {
            steps {
                // First, drop the directory if it exists
                sh 'rm -rf /home/jenkins/app-web'
                // Create the directory
                sh 'mkdir /home/jenkins/app-web'
            }
        }

        stage('Drop the container') {
            steps {
                echo 'Dropping the container...'
                sh 'docker rm -f app-web || true' // avoid error if container doesn't exist
            }
        }

        // Apache Web Server
        stage('Create the Apache container') {
            when {
                environment name: 'WEBSERVER', value: 'Apache'
            }
            steps {
                echo 'Creating Apache container...'
